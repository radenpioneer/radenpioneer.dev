---
import Layout from '~/layouts/layout.astro'
import type { Post } from '~/data/schema'
import { Picture } from 'astro:assets'
import typestyle from '~/styles/fonts.module.scss'

interface Props {
  post: Post
}

const {
  post: { title, subtitle, coverImage, publishedAt },
} = Astro.props
---

<Layout title={title} description={subtitle || undefined} hide={!!publishedAt}>
  <!-- Main Article -->
  <article class="prose text-justify max-w-none">
    <!-- Heading Section -->
    <hgroup class="not-prose flex flex-col gap-4 font-sans mb-16">
      <h1
        class={`${typestyle.__heading} text-2xl md:text-4xl font-black text-left`}
      >
        {title}
      </h1>
      {
        subtitle && (
          <p class="text-xl md:text-2xl italic text-left">{subtitle}</p>
        )
      }
      <div class="flex gap-1 text-sm">
        <time datetime={new Date(publishedAt).toISOString()}>
          {
            new Date(publishedAt).toLocaleDateString('id', {
              dateStyle: 'long',
            })
          }
        </time>
      </div>
    </hgroup>

    <!-- Optional Image Section -->
    {
      coverImage && (
        <p>
          <Picture
            src={coverImage.url}
            formats={['avif', 'webp']}
            width={800}
            height={600}
            loading="eager"
            alt={title}
          />
        </p>
      )
    }

    <!-- Rendered Content -->
    <slot />
  </article>
</Layout>
