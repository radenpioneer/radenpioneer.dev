---
import BaseLayout from './base.astro'
import Header from '~/components/header'
import { SEO } from 'astro-seo'
import { getEntry } from 'astro:content'
import { getImage } from 'astro:assets'

import '@fontsource/plus-jakarta-sans/400.css'
import '@fontsource/plus-jakarta-sans/700.css'
import '@fontsource/plus-jakarta-sans/800.css'
import '~/styles/nohemi.scss'
import '~/styles/base.scss'

export interface Props {
  title?: string | undefined
  description?: string | undefined
}

const site = await getEntry('site', 'site')
const image = await getImage({ src: site.data.image, width: 80, height: 80 })
const { title, description } = Astro.props
---

<BaseLayout>
  <!-- Head -->
  <Fragment slot="head">
    <SEO
      title={title
        ? `${title} \u2014 ${site.data.title}`
        : `${site.data.title} \u2014 ${site.data.subtitle}`}
      description={description || site.data.description}
    />
    <link rel="preload" as="image" href={image.src} />
    <slot name="head" />
  </Fragment>

  <!-- Main Body -->
  <Fragment>
    <Header image={image} site={site} />
    <main>
      <slot />
    </main>
  </Fragment>
</BaseLayout>
